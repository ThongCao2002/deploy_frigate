import{u as v,e as h,F as b,o as e,f as g,k as t,H as c,A as y}from"./index-1b1f5707.js";import{J as x}from"./JSMpegPlayer-a228c7b4.js";import{W as N,C}from"./CameraControlPanel-415968c2.js";import"./ArrowRightDouble-efaefc73.js";function W(){const{data:s}=v("config"),[d,u,p]=h("birdseye-source",S(s)),f=["mse","webrtc","jsmpeg"],a=b(()=>s?Object.entries(s.cameras).filter(([r,n])=>{var m;return((m=n.onvif)==null?void 0:m.host)&&n.onvif.host!=""}).map(([r,n])=>n.name):[],[s]),[o,w]=h("birdseye-width",!1);if(!s||!p)return e(y,{});let i;const l=a.length||o?"w-full":"max-w-5xl xl:w-1/2";return d=="mse"&&s.birdseye.restream?"MediaSource"in window?i=e(t,{children:e("div",{className:l,children:e("video-stream",{mode:"mse",src:new URL(`${g.replace(/^http/,"ws")}live/webrtc/api/ws?src=birdseye`)})})}):i=e(t,{children:e("div",{className:"w-5xl text-center text-sm",children:"MSE is not supported on iOS devices. You'll need to use jsmpeg or webRTC. See the docs for more info."})}):d=="webrtc"?i=e(t,{children:e("div",{className:l,children:e(N,{camera:"birdseye"})})}):i=e(t,{children:e("div",{className:l,children:e(x,{camera:"birdseye"})})}),e("div",{className:"space-y-4 p-2 px-4",children:[e("div",{className:"flex justify-between",children:[e(c,{className:"p-2",size:"2xl",children:"TRỰC TIẾP"}),!a.length&&e("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded hidden md:inline",onClick:()=>w(!o),children:"Điều chỉnh chiều rộng"}),s.birdseye.restream&&e("select",{className:"basis-1/8 cursor-pointer rounded dark:bg-slate-800",value:d,onChange:r=>u(r.target.value),children:f.map(r=>e("option",{value:r,children:r},r))},"width-changer")]}),e("div",{className:"xl:flex justify-between",children:[e("div",{className:l,children:[" ",i]}),a.length?e("div",{className:"dark:bg-gray-800 shadow-md hover:shadow-lg rounded-lg transition-shadow p-4 w-full sm:w-min xl:h-min xl:w-1/2",children:[e(c,{size:"sm",children:"Control Panel"}),a.map(r=>e("div",{className:"p-4",children:[e(c,{size:"lg",children:r.replaceAll("_"," ")}),e(C,{camera:r})]},r))]}):null]})]})}function S(s){if(s)return s.birdseye.restream?s.ui.live_mode:"jsmpeg"}export{W as default};
