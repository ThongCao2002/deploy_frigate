import{x as z,o as n,_ as B,F as I,h as K,T as l,p as S}from"./index-1b1f5707.js";import{A as O}from"./ArrowRightDouble-efaefc73.js";function q({className:f=""}){return n("svg",{className:`fill-current ${f}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:n("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"})})}const T=z(q),u=new Date().setHours(0,0,0,0).valueOf(),G=({onChange:f,calendarRef:$,close:F,dateRange:E,children:U})=>{const o=B([]),p=new Date,y=p.getFullYear(),b=p.getMonth(),w=I(()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],[]),x=I(()=>["January","February","March","April","May","June","July","August","September","October","November","December"],[]),[a,h]=K({getMonthDetails:[],year:y,month:b,selectedDay:null,timeRange:E,monthDetails:null}),d=l((e,t)=>40-new Date(e,t,40).getDate(),[]),N=l(e=>{const t=e.index-e.firstDay,r=e.index%7;let s=e.month-1,i=e.year;s<0&&(s=11,i--);const D=d(i,s),m=(t<0?D+t:t%e.numberOfDays)+1,g=t<0?-1:t>=e.numberOfDays?1:0,v=new Date(e.year,e.month,m).getTime();return{date:m,day:r,month:g,timestamp:v,dayString:w[r]}},[d,w]),c=l((e,t)=>{const r=new Date(e,t).getDay(),s=d(e,t),i=[],D=6;let m=null,g=0;const v=7;for(let C=0;C<D;C++)for(let j=0;j<v;j++)m=N({index:g,numberOfDays:s,firstDay:r,year:e,month:t}),i.push(m),g++;return i},[d,N]);S(()=>{h(e=>({...e,selectedDay:u,monthDetails:c(y,b)}))},[y,b,c]),S(()=>{var t;a.monthDetails&&(o.current=o.current.slice(0,a.monthDetails.length));const e=new Date(u).getDate();(t=o.current.find(r=>r.tabIndex===e))==null||t.focus()},[a.monthDetails]);const k=e=>e.timestamp===u,J=l(e=>{if(!(!a.timeRange.after||!a.timeRange.before))return e.timestamp<a.timeRange.before&&e.timestamp>=new Date(a.timeRange.after).setHours(0)},[a.timeRange]),Y=l(e=>{if(!k(e))return new Date(a.timeRange.after).setHours(0)===e.timestamp},[a.timeRange.after]),R=l(e=>{const t=new Date(a.timeRange.before).getHours()||24;return a.timeRange.before===new Date(e.timestamp).setHours(t)},[a.timeRange.before]),L=l(e=>x[Math.max(Math.min(11,e),0)]||"Month",[x]),M=e=>{const{before:t,after:r}=a.timeRange;let s={before:null,after:null};(r===null||e.timestamp<r)&&(s={before:new Date(e.timestamp).setHours(24,0,0,0),after:e.timestamp}),r!==null&&t!==new Date(e.timestamp).setHours(24,0,0,0)&&e.timestamp>r&&(s={after:r,before:e.timestamp>=u?new Date(u).setHours(24,0,0,0):new Date(e.timestamp).setHours(24,0,0,0)}),t===new Date(e.timestamp).setHours(24,0,0,0)&&(s={before:null,after:null}),h(i=>({...i,timeRange:s,selectedDay:e.timestamp})),f&&f(s.after?{before:s.before/1e3,after:s.after/1e3}:["all"])},A=l(e=>{const t=a.year+e,r=a.month;h(s=>({...s,year:t,monthDetails:c(t,r)}))},[a.year,a.month,c]),H=e=>{let t=a.year,r=a.month+e;r===-1?(r=11,t--):r===12&&(r=0,t++),h(s=>({...s,year:t,month:r,monthDetails:c(t,r)}))},W=(e,t,r)=>{(o.current&&e.key==="Enter"||e.keyCode===32)&&(e.preventDefault(),t.month===0&&M(t)),e.key==="ArrowLeft"&&r>0&&o.current[r-1].focus(),e.key==="ArrowRight"&&r<41&&o.current[r+1].focus(),e.key==="ArrowUp"&&(e.preventDefault(),r>6&&o.current[r-7].focus()),e.key==="ArrowDown"&&(e.preventDefault(),r<36&&o.current[r+7].focus()),e.key==="Escape"&&F()},_=()=>{const e=a.monthDetails&&a.monthDetails.map((t,r)=>n("div",{onClick:()=>M(t),onkeydown:s=>W(s,t,r),ref:s=>o.current[r]=s,tabIndex:t.month===0?t.date:null,className:`h-12 w-12 float-left flex flex-shrink justify-center items-center cursor-pointer hover:border hover:rounded-md border-gray-600 ${t.month!==0?" opacity-50 bg-gray-700 dark:bg-gray-700 pointer-events-none":""}
              ${Y(t)?" rounded-l-xl hover:rounded-l-xl":""}
              ${J(t)?" bg-blue-600 hover:rounded-none":""}
              ${R(t)?" rounded-r-xl hover:rounded-r-xl":""}
              ${k(t)&&!R(t)?"rounded-full bg-gray-100 dark:hover:bg-gray-100 ":""}`,children:n("div",{className:"font-light",children:n("span",{className:"text-gray-400",children:t.date})})},r));return n("div",{children:[n("div",{className:"w-full flex justify-start flex-shrink",children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map((t,r)=>n("div",{className:"w-12 text-xs font-light text-center",children:t},r))}),n("div",{className:"w-full h-56",children:e})]})};return n("div",{className:"select-none w-11/12 flex",ref:$,children:[n("div",{className:"px-6",children:[n("div",{className:"flex items-center",children:[n("div",{className:"w-1/6 relative flex justify-around",children:n("div",{tabIndex:100,className:"flex justify-center items-center cursor-pointer absolute  -mt-4 text-center rounded-full w-10 h-10 bg-gray-500 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>A(-1),children:n(O,{className:"h-2/6 transform rotate-180 "})})}),n("div",{className:"w-1/6 relative flex justify-around ",children:n("div",{tabIndex:101,className:"flex justify-center items-center cursor-pointer absolute  -mt-4 text-center rounded-full w-10 h-10 bg-gray-500 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>H(-1),children:n(T,{className:"h-2/6 transform rotate-180 red"})})}),n("div",{className:"w-1/3",children:[n("div",{className:"text-3xl text-center text-gray-200 font-extralight",children:a.year}),n("div",{className:"text-center text-gray-400 font-extralight",children:L(a.month)})]}),n("div",{className:"w-1/6 relative flex justify-around ",children:n("div",{tabIndex:102,className:"flex justify-center items-center cursor-pointer absolute  -mt-4 text-center rounded-full w-10 h-10 bg-gray-500 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>H(1),children:n(T,{className:"h-2/6"})})}),n("div",{className:"w-1/6 relative flex justify-around",tabIndex:104,onClick:()=>A(1),children:n("div",{className:"flex justify-center items-center cursor-pointer absolute  -mt-4 text-center rounded-full w-10 h-10 bg-gray-500 hover:bg-gray-200 dark:hover:bg-gray-800",children:n(O,{className:"h-2/6"})})})]}),n("div",{className:"mt-3",children:_()})]}),U]})},V=G;export{V as C};
